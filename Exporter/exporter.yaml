# Chart values for the Camunda 8 Helm chart.
# This file deliberately contains only the values that differ from the defaults.
# For changes and documentation, use your favorite diff tool to compare it with:
# http://artifacthub.io/packages/helm/camunda/camunda-platform#parameters

global:
  ingress:
    enabled: false
  #   className: nginx
  #   host: "txnflow.txninfra.com"

  identity:
    auth:
      enabled: false
      # publicIssuerUrl: "http://txnflow.txninfra.com/auth/realms/camunda-platform"
      operate:
        # redirectUrl: "http://txnflow.txninfra.com/operate"
      tasklist:
        # redirectUrl: "http://txnflow.txninfra.com/tasklist"
      optimize:
        # redirectUrl: "http://txnflow.txninfra.com/optimize"
      connectors:
        # redirectUrl: "http://txnflow.txninfra.com/connectors"
      webModeler:
        # redirectUrl: "http://txnflow.txninfra.com/modeler"

# identityKeycloak:
#   image:
#     repository: bitnami/keycloak
#     tag: 26.0.5
#   extraEnvVars:
#     - name: FRONTEND_URL
#       value: "https://txnflow.txninfra.com/auth/"
#     - name: KEYCLOAK_FRONTEND_URL
#       value: "https://txnflow.txninfra.com/auth/"
#     - name: KC_HOSTNAME
#       value: "https://txnflow.txninfra.com/auth/"
    

operate:
  # contextPath: "/operate"

tasklist:
  # contextPath: "/tasklist"

optimize:
  # contextPath: "/optimize"

connectors:
  enabled: true
  inbound:
    mode: disabled
  # contextPath: "/connectors"


identity:
  # contextPath: "/identity"
  # fullURL: "http://txnflow.txninfra.com/identity"
  env:
  - name: USER_RESTRICTIONS_ENABLED
    value: "true"

zeebeGateway:
  # contextPath: "/zeebe"

zeebe:
  configuration: |
    zeebe:
      client:
          broker:
            gateway-address: 127.0.0.1:26500
          security:
            plaintext: true
      broker:
          exporters:
            elasticsearch:
              className: "io.camunda.zeebe.exporter.ElasticsearchExporter"
              args:
                url: "http://camunda-elasticsearch:9200"
                index:
                  prefix: "zeebe-record"
            customExporter:
              className: com.isu.camunda.exporter.process.CustomPostgresExporter
              jarPath: /usr/local/zeebe/lib/camunda-exporter-0.0.1-SNAPSHOT.jar
              args:
                jdbcUrl: jdbc:postgresql://35.200.195.169:5432/bitnami_keycloak
                username: bn_keycloak
                password: #3]O?4RGj)DE7Z!9SA5   
          gateway:
            enable: true
            network:
              port: 26500
            security:
              enabled: false
              authentication:
                mode: none
          network:
            host: 0.0.0.0
            commandApi:
              port: 26501
            internalApi:
              port: 26502
            monitoringApi:
              port: "9600"
          cluster:
            clusterSize: "3"
            replicationFactor: "3"
            partitionsCount: "3"
            clusterName: camunda-zeebe
          threads:
            cpuThreadCount: "3"
            ioThreadCount: "3"
    # Camunda Database configuration
    camunda.database:
      type: elasticsearch
      # Cluster name
      clusterName: elasticsearch
      # Elasticsearch full url
      url: "http://camunda-elasticsearch:9200"

  initContainers:
  - name: init-exporters-hazelcast
    image: busybox:1.35
    command: ["/bin/sh", "-c"]
    args:
      [
        "wget --no-check-certificate https://github.com/00RohitRoshan/Identity/raw/refs/heads/main/camunda-exporter-0.0.1-SNAPSHOT.jar -O /exporters/camunda-exporter-0.0.1-SNAPSHOT.jar; ls -al /exporters",
      ]
    volumeMounts:
      - name: exporters
        mountPath: /exporters/

# kubectl create configmap config --from-file application.yaml